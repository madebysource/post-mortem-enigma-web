/*!
 * enigma64
 * http://getenigma64.com
 * team@madebysource.com
 * 
 * Copyright 2014 Piffle LLC - All Rights Reserved
 * 
 * Author:
 * Patrik Holcak <patrikholcak@abdoc.net> (http://github.com/patrikholcak)
 * 
 * Build v1.0.0 - 2014-01-29
 */
var Enigma=function(a){this.element=a,this.playing=!1,this.writing=!0,this.time=+new Date,this.letters="A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(","),this.buttonPressLength=300,this.prepareElements(),this.prepareEventListeners(),this.element.className="awesome",this.lines=[""],this.queue=[],this.nextLetterAppend=3e3,this.cursorVisible=!0,this.nextCursorChange=200,this.cursorInterval=300,this.ctx.font="bold 11px sans-serif",this.ctx.fillStyle="#b37b4e",this.baseY=33,this.baseX=25,this.scrollY=0,this.lineHeight=14,this.scrollSpeed=30,this.maxWidth=170,this.maxLines=2};Enigma.prototype.prepareElements=function(){this.buttonsContainer=document.createElement("div"),this.buttons={};for(var a=0,b=this.letters.length;b>a;++a)this.buttons[this.letters[a]]=document.createElement("span"),this.buttons[this.letters[a]].className=this.letters[a].toLowerCase(),this.buttons[this.letters[a]].innerHTML="<b></b>",this.buttonsContainer.appendChild(this.buttons[this.letters[a]]);this.element.appendChild(this.buttonsContainer),this.canvas=document.createElement("canvas"),this.canvas.width=218,this.canvas.height=58,this.canvas.className="display",this.ctx=this.canvas.getContext("2d"),this.element.appendChild(this.canvas),this.reflection=document.createElement("canvas"),this.reflection.width=218,this.reflection.height=58,this.reflection.className="reflection",this.reflectionCtx=this.reflection.getContext("2d"),this.element.appendChild(this.reflection);var c=document.createElement("span");c.className="led",this.element.appendChild(c)},Enigma.prototype.prepareEventListeners=function(){var a=this;window.addEventListener("scroll",function(){window.scrollY>250&&a.playing&&a.stop(),window.scrollY<250&&!a.playing&&a.start()},!1),window.addEventListener("resize",function(){window.innerWidth<800&&a.playing&&a.stop(),window.innerWidth>799&&!a.playing&&a.start()},!1),document.addEventListener("keydown",function(b){var c=String.fromCharCode(b.which);a.buttons[c]?(a.buttonDown(c),a.appendLetter(c)):32===b.which?(a.appendLetter("/"),a.preventScroll&&b.preventDefault()):13===b.which&&""!==a.lines[a.lines.length-1].replace("_","")&&a.lines.push("")},!1),document.addEventListener("keyup",function(b){var c=String.fromCharCode(b.which);a.buttons[c]&&a.buttonUp(c)},!1),this.element.addEventListener("mouseover",function(){a.writing=!1,a.preventScroll=!0},!1),this.element.addEventListener("mouseout",function(){a.writing=!0,a.preventScroll=!1},!1),this.element.addEventListener("mousedown",function(b){var c=b.target;"B"===c.tagName&&(c=c.parentElement),"SPAN"===c.tagName&&a.appendLetter(c.className.substr(0,1).toUpperCase())},!1),window.addEventListener("blur",function(){a.stop()},!1),window.addEventListener("focus",function(){a.start()},!1)},Enigma.prototype.start=function(){this.playing=!0,this.loop()},Enigma.prototype.stop=function(){this.playing=!1},Enigma.prototype.loop=function(a){if(this.playing){var b=this;requestAnimationFrame(function(a){b.loop(a)});var c=a?a-this.time:0;this.time=a,this.update(c),this.render()}},Enigma.prototype.willFit=function(a){var b=this.ctx.measureText(a);return b.width<this.maxWidth},Enigma.prototype.appendLetter=function(a){var b=this.lines[this.lines.length-1];this.willFit(b+a)?this.lines[this.lines.length-1]+=a:this.lines.push(a)},Enigma.prototype.pushButton=function(a){this.buttonDown(a);var b=this;setTimeout(function(){b.buttonUp(a)},this.buttonPressLength)},Enigma.prototype.buttonDown=function(a){var b=this.buttons[a];b&&(b.className+=" down",this.writing||(this.element.className+=" pressed"))},Enigma.prototype.buttonUp=function(a){var b=this.buttons[a];b&&(b.className=b.className.replace(/ down/g,""),this.element.className=this.element.className.replace(/ pressed/g,""))},Enigma.prototype.update=function(a){a=a||0;for(var b=0,c=this.lines.length;c>b;++b)this.lines[b]=this.lines[b].replace("_","");if(this.writing&&(this.nextLetterAppend-=a,this.nextLetterAppend<0)){this.nextLetterAppend=100+300*Math.random();var d=this.queue.length?this.queue.shift():"";this.appendLetter(d),this.pushButton(d)}this.nextCursorChange-=a,this.nextCursorChange<0&&(this.nextCursorChange=this.cursorInterval,this.cursorVisible=!this.cursorVisible),this.cursorVisible&&this.appendLetter("_"),this.lines.length>this.maxLines&&(this.scrollY+=Math.ceil(a/1e3*this.scrollSpeed),this.scrollY>=this.lineHeight&&(this.lines.shift(),this.scrollY=0)),this.reflectionCtx.putImageData(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),0,0)},Enigma.prototype.render=function(){var a=this.ctx;a.clearRect(0,0,this.canvas.width,this.canvas.height);for(var b=0,c=this.lines.length;c>b;++b)a.globalAlpha=0===b&&0!==this.scrollY?1-this.scrollY/this.lineHeight:1,a.fillText(this.lines[b],this.baseX,this.baseY-this.scrollY+b*this.lineHeight)},function(){function f(a){throw a}function aa(a){return function(){return this[a]}}function q(a){return function(){return a}}function ca(){}function da(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return a!==j}function ea(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function u(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function ga(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function ha(a){return a.call.apply(a.bind,arguments)}function ia(a,b){if(a||f(Error()),2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,c),a.apply(b,d)}}return function(){return a.apply(b,arguments)}}function v(){return v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia,v.apply(l,arguments)}function ja(a,b){function c(){}c.prototype=b.prototype,a.Jd=b.prototype,a.prototype=new c}function ka(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))}function la(){this.Xb=j}function ma(a,b,c){switch(typeof b){case"string":na(b,c);break;case"number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case"boolean":c.push(b);break;case"undefined":c.push("null");break;case"object":if(b==l){c.push("null");break}if("array"==da(b)){var d=b.length;c.push("[");for(var e="",g=0;d>g;g++)c.push(e),e=b[g],ma(a,a.Xb?a.Xb.call(b,String(g),e):e,c),e=",";c.push("]");break}c.push("{"),d="";for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(e=b[g],"function"!=typeof e&&(c.push(d),na(g,c),c.push(":"),ma(a,a.Xb?a.Xb.call(b,g,e):e,c),d=","));c.push("}");break;case"function":break;default:f(Error("Unknown type: "+typeof b))}}function na(a,b){b.push('"',a.replace(pa,function(a){if(a in oa)return oa[a];var b=a.charCodeAt(0),c="\\u";return 16>b?c+="000":256>b?c+="00":4096>b&&(c+="0"),oa[a]=c+b.toString(16)}),'"')}function y(a){if("undefined"!=typeof JSON&&t(JSON.stringify))a=JSON.stringify(a);else{var b=[];ma(new la,a,b),a=b.join("")}return a}function qa(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);e>=55296&&56319>=e&&(e-=55296,d++,z(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320)),128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=63&e|128)}return b}function A(a,b,c,d){var e;b>d?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c),e&&f(Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+"."))}function B(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:ra.assert(o,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}return a+" failed: "+(d+" argument ")}function C(a,b,c,d){(!d||t(c))&&"function"!=da(c)&&f(Error(B(a,b,d)+"must be a valid function."))}function sa(a,b,c){t(c)&&(!ga(c)||c===l)&&f(Error(B(a,b,k)+"must be a valid context object."))}function D(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function ta(a,b){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:void 0}function xa(a){return u(a)&&0!==a.length&&!va.test(a)}function ya(a,b,c){(!c||t(b))&&za(B(a,1,c),b)}function za(a,b,c,d){if(c||(c=0),d||(d=[]),t(b)||f(Error(a+"contains undefined"+Aa(d))),"function"==da(b)&&f(Error(a+"contains a function"+Aa(d)+" with contents: "+b.toString())),Ba(b)&&f(Error(a+"contains "+b.toString()+Aa(d))),c>1e3&&f(new TypeError(a+"contains a cyclic object value ("+d.slice(0,100).join(".")+"...)")),u(b)&&b.length>10485760/3&&10485760<ua.Kd.Id(b).length&&f(Error(a+"contains a string greater than 10485760 utf8 bytes"+Aa(d)+" ('"+b.substring(0,50)+"...')")),ga(b))for(var e in b)D(b,e)&&(".priority"!==e&&".value"!==e&&!xa(e)&&f(Error(a+"contains an invalid key ("+e+")"+Aa(d)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')),d.push(e),za(a,b[e],c+1,d),d.pop())}function Aa(a){return 0==a.length?"":" in property '"+a.join(".")+"'"}function Ca(a,b){ga(b)||f(Error(B(a,1,o)+" must be an object containing the children to replace.")),ya(a,b,o)}function Da(a,b,c,d){(!d||t(c))&&c!==l&&!fa(c)&&!u(c)&&f(Error(B(a,b,d)+"must be a valid firebase priority (null or a string.)"))}function Ea(a,b,c){if(!c||t(b))switch(b){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:f(Error(B(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".'))}}function Fa(a,b){t(b)&&!xa(b)&&f(Error(B(a,2,k)+'must be a valid firebase key (non-empty string, not containing ".", "#", "$", "/", "[", or "]").'))}function Ga(a,b){(!u(b)||0===b.length||wa.test(b))&&f(Error(B(a,1,o)+'must be a non-empty string and can\'t contain ".", "#", "$", "[", or "]".'))}function E(a,b){".info"===F(b)&&f(Error(a+" failed: Can't modify data under /.info/"))}function G(a,b,c,d,e,g,h){this.u=a,this.path=b,this.ua=c,this.ba=d,this.ma=e,this.sa=g,this.Oa=h,t(this.ba)&&t(this.sa)&&t(this.ua)&&f("Query: Can't combine startAt(), endAt(), and limit().")}function Ia(a){var b={};return t(a.ba)&&(b.sp=a.ba),t(a.ma)&&(b.sn=a.ma),t(a.sa)&&(b.ep=a.sa),t(a.Oa)&&(b.en=a.Oa),t(a.ua)&&(b.l=a.ua),t(a.ba)&&t(a.ma)&&a.ba===l&&a.ma===l&&(b.vf="l"),b}function Ha(a,b,c){var d={};return b&&c?(d.cancel=b,C(a,3,d.cancel,k),d.Z=c,sa(a,4,d.Z)):b&&("object"==typeof b&&b!==l?d.Z=b:"function"==typeof b?d.cancel=b:f(Error(B(a,3,k)+"must either be a cancel callback or a context object."))),d}function I(a){if(a instanceof I)return a;if(1==arguments.length){this.m=a.split("/");for(var b=0,c=0;c<this.m.length;c++)0<this.m[c].length&&(this.m[b]=this.m[c],b++);this.m.length=b,this.$=0}else this.m=arguments[0],this.$=arguments[1]}function F(a){return a.$>=a.m.length?l:a.m[a.$]}function J(a){var b=a.$;return b<a.m.length&&b++,new I(a.m,b)}function Ka(a){return a.$<a.m.length?a.m[a.m.length-1]:l}function La(a,b){var c=F(a);return c===l?b:c===F(b)?La(J(a),J(b)):void f("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")")}function Ma(){this.children={},this.ic=0,this.value=l}function Na(a,b,c){this.va=a?a:"",this.pb=b?b:l,this.z=c?c:new Ma}function L(a,b){for(var c,d=b instanceof I?b:new I(b),e=a;(c=F(d))!==l;)e=new Na(c,e,ta(e.z.children,c)||new Ma),d=J(d);return e}function M(a,b){z("undefined"!=typeof b),a.z.value=b,Oa(a)}function Pa(a,b,c,d){c&&!d&&b(a),a.w(function(a){Pa(a,b,k,d)}),c&&d&&b(a)}function Qa(a,b,c){for(a=c?a:a.parent();a!==l;){if(b(a))return k;a=a.parent()}return o}function Oa(a){if(a.pb!==l){var b=a.pb,c=a.va,d=a.f(),e=D(b.z.children,c);d&&e?(delete b.z.children[c],b.z.ic--,Oa(b)):!d&&!e&&(b.z.children[c]=a.z,b.z.ic++,Oa(b))}}function Ta(a,b){this.La=a?a:Ua,this.aa=b?b:Va}function Ua(a,b){return b>a?-1:a>b?1:0}function Wa(a,b){for(var c,d=a.aa,e=l;!d.f();){if(c=a.La(b,d.key),0===c){if(d.left.f())return e?e.key:l;for(d=d.left;!d.right.f();)d=d.right;return d.key}0>c?d=d.left:c>0&&(e=d,d=d.right)}f(Error("Attempted to find predecessor key for a nonexistent key.  What gives?"))}function Xa(a,b){for(this.Yc=b,this.Ib=[];!a.f();)this.Ib.push(a),a=a.left}function Ya(a){if(0===a.Ib.length)return l;var b,c=a.Ib.pop();for(b=a.Yc?a.Yc(c.key,c.value):{key:c.key,value:c.value},c=c.right;!c.f();)a.Ib.push(c),c=c.left;return b}function Za(a,b,c,d,e){this.key=a,this.value=b,this.color=c!=l?c:k,this.left=d!=l?d:Va,this.right=e!=l?e:Va}function $a(a){return a.left.f()?a:$a(a.left)}function bb(a){return a.left.f()?Va:(!a.left.K()&&!a.left.left.K()&&(a=cb(a)),a=a.copy(l,l,l,bb(a.left),l),ab(a))}function ab(a){return a.right.K()&&!a.left.K()&&(a=fb(a)),a.left.K()&&a.left.left.K()&&(a=db(a)),a.left.K()&&a.right.K()&&(a=eb(a)),a}function cb(a){return a=eb(a),a.right.left.K()&&(a=a.copy(l,l,l,l,db(a.right)),a=fb(a),a=eb(a)),a}function fb(a){var b;return b=a.copy(l,l,k,l,a.right.left),a.right.copy(l,l,a.color,b,l)}function db(a){var b;return b=a.copy(l,l,k,a.left.right,l),a.left.copy(l,l,a.color,l,b)}function eb(a){var b,c;return b=a.left.copy(l,l,!a.left.color,l,l),c=a.right.copy(l,l,!a.right.color,l,l),a.copy(l,l,!a.color,b,c)}function gb(){}function kb(){}function lb(){this.B=[],this.hc=[],this.hd=[],this.Ob=[],this.Ob[0]=128;for(var a=1;64>a;++a)this.Ob[a]=0;this.reset()}function mb(a,b){var c;c||(c=0);for(var d=a.hd,e=c;c+64>e;e+=4)d[e/4]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3];for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=4294967295&(f<<1|f>>>31)}c=a.B[0];for(var g,h=a.B[1],i=a.B[2],j=a.B[3],k=a.B[4],e=0;80>e;e++)40>e?20>e?(f=j^h&(i^j),g=1518500249):(f=h^i^j,g=1859775393):60>e?(f=h&i|j&(h|i),g=2400959708):(f=h^i^j,g=3395469782),f=(c<<5|c>>>27)+f+k+g+d[e]&4294967295,k=j,j=i,i=4294967295&(h<<30|h>>>2),h=c,c=f;a.B[0]=a.B[0]+c&4294967295,a.B[1]=a.B[1]+h&4294967295,a.B[2]=a.B[2]+i&4294967295,a.B[3]=a.B[3]+j&4294967295,a.B[4]=a.B[4]+k&4294967295}function nb(){this.Ka={},this.length=0}function pb(a,b,c,d){this.host=a,this.Yb=b,this.kb=c,this.ca=d||O.getItem(a)||this.host}function qb(a,b){b!==a.ca&&(a.ca=b,"s-"===a.ca.substr(0,2)&&O.setItem(a.host,a.ca))}function vb(){return ba.navigator?ba.navigator.userAgent:l}function Fb(a,b){if(ea(a)||f(Error("encodeByteArray takes an array as a parameter")),!Db){Db={},Eb={};for(var c=0;65>c;c++)Db[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),Eb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(c)}for(var c=b?Eb:Db,d=[],e=0;e<a.length;e+=3){var g=a[e],h=e+1<a.length,i=h?a[e+1]:0,j=e+2<a.length,k=j?a[e+2]:0,l=g>>2,g=(3&g)<<4|i>>4,i=(15&i)<<2|k>>6,k=63&k;j||(k=64,h||(i=64)),d.push(c[l],c[g],c[i],c[k])}return d.join("")}function z(a,b){a||f(Error("Firebase INTERNAL ASSERT FAILED:"+b))}function Ib(a){var b=qa(a),a=new lb;a.update(b);var b=[],c=8*a.Dc;56>a.fb?a.update(a.Ob,56-a.fb):a.update(a.Ob,64-(a.fb-56));for(var d=63;d>=56;d--)a.hc[d]=255&c,c/=256;for(mb(a,a.hc),d=c=0;5>d;d++)for(var e=24;e>=0;e-=8)b[c++]=a.B[d]>>e&255;return Fb(b)}function Jb(){for(var a="",b=0;b<arguments.length;b++)a=ea(arguments[b])?a+Jb.apply(l,arguments[b]):"object"==typeof arguments[b]?a+y(arguments[b]):a+arguments[b],a+=" ";return a}function Mb(){if(Lb===k&&(Lb=o,Kb===l&&"true"===O.getItem("logging_enabled")&&Nb(k)),Kb){var a=Jb.apply(l,arguments);Kb(a)}}function Ob(a){return function(){Mb(a,arguments)}}function Pb(){if("undefined"!=typeof console){var a="FIREBASE INTERNAL ERROR: "+Jb.apply(l,arguments);"undefined"!=typeof console.error?console.error(a):console.log(a)}}function Qb(){var a=Jb.apply(l,arguments);f(Error("FIREBASE FATAL ERROR: "+a))}function Rb(){if("undefined"!=typeof console){var a="FIREBASE WARNING: "+Jb.apply(l,arguments);"undefined"!=typeof console.warn?console.warn(a):console.log(a)}}function Ba(a){return fa(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function Sb(a,b){return a!==b?a===l?-1:b===l?1:typeof a!=typeof b?"number"==typeof a?-1:1:a>b?1:-1:0}function Tb(a,b){return b&&a in b?b[a]:void f(Error("Missing required key ("+a+") in object: "+y(b)))}function Ja(a){if("object"!=typeof a||a===l)return y(a);var b,c=[];for(b in a)c.push(b);c.sort(),b="{";for(var d=0;d<c.length;d++)0!==d&&(b+=","),b+=y(c[d]),b+=":",b+=Ja(a[c[d]]);return b+"}"}function Vb(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)c.push(d+b>a?a.substring(d,a.length):a.substring(d,d+b));return c}function Wb(a){z(!Ba(a));var b,c,d,e;for(0===a?(d=c=0,b=-1/0===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074)))),e=[],a=52;a;a-=1)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;a-=1)e.push(c%2?1:0),c=Math.floor(c/2);for(e.push(b?1:0),e.reverse(),b=e.join(""),c="",a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&(d="0"+d),c+=d;return c.toLowerCase()}function Yb(a,b){this.D=a,z(this.D!==l,"LeafNode shouldn't be created with null value."),this.Ta="undefined"!=typeof b?b:l}function Q(a,b){this.n=a||new Ta,this.Ta="undefined"!=typeof b?b:l}function $b(a,b,c){Q.call(this,a,c),b===l&&(b=new Ta(bc),a.ta(function(a,c){b=b.ja({name:a,wa:c.k()},c)})),this.la=b}function R(a,b){if("object"!=typeof a)return new Yb(a,b);if(a===l)return P;var c=l;if(".priority"in a?c=a[".priority"]:"undefined"!=typeof b&&(c=b),z(c===l||"string"==typeof c||"number"==typeof c),".value"in a&&a[".value"]!==l)return new Yb(a[".value"],c);var d,c=new Q(new Ta,c);for(d in a)if(D(a,d)&&"."!==d.substring(0,1)){var e=R(a[d]);(e.J()||!e.f())&&(c=c.H(d,e))}return c}function bc(a,b){return Sb(a.wa,b.wa)||(a.name!==b.name?a.name<b.name?-1:1:0)}function Zb(a){return"number"==typeof a?"number:"+Wb(a):"string:"+a}function S(a,b){this.z=a,this.Vb=b}function cc(a){this.tc=a,this.Qb=[],this.Na=0,this.jc=-1,this.Ea=l}function dc(a,b){for(var c in a)b.call(j,a[c],c,a)}function ec(a){var b,c={};for(b in a)c[b]=a[b];return c}function fc(){this.$a={}}function gc(a,b,c){t(c)||(c=1),D(a.$a,b)||(a.$a[b]=0),a.$a[b]+=c}function hc(a){this.jd=a,this.Hb=l}function ic(a,b){this.Bc={},this.ac=new hc(a),this.o=b,setTimeout(v(this.Wc,this),10+6e4*Math.random())}function lc(a){return a=a.toString(),jc[a]||(jc[a]=new fc),jc[a]}function nc(a,b,c){this.kc=a,this.e=Ob(this.kc),this.frames=this.hb=l,this.Cc=0,this.X=lc(b),this.Ma=(b.Yb?"wss://":"ws://")+b.ca+"/.ws?v=5",b.host!==b.ca&&(this.Ma=this.Ma+"&ns="+b.kb),c&&(this.Ma=this.Ma+"&s="+c)}function qc(a,b){if(a.frames.push(b),a.frames.length==a.Cc){var c=a.frames.join("");a.frames=l,c="undefined"!=typeof JSON&&t(JSON.parse)?JSON.parse(c):ka(c),a.vd(c)}}function pc(a){clearTimeout(a.hb),a.hb=setInterval(function(){a.W.send("0"),pc(a)},45e3)}function rc(){this.set={}}function sc(a,b){for(var c in a.set)D(a.set,c)&&b(c,a.set[c])}function vc(a,b,c){this.kc=a,this.e=Ob(a),this.Hd=b,this.X=lc(b),this.$b=c,this.ab=o,this.Db=function(a){b.host!==b.ca&&(a.ns=b.kb);var c,d=[];for(c in a)a.hasOwnProperty(c)&&d.push(c+"="+a[c]);return(b.Yb?"https://":"http://")+b.ca+"/.lp?"+d.join("&")}}function yc(a,b,c,d){this.Db=d,this.fa=c,this.uc=new rc,this.rb=[],this.lc=Math.floor(1e8*Math.random()),this.Zb=k,this.cc=Gb(),window[tc+this.cc]=a,window[uc+this.cc]=b,a=document.createElement("iframe"),a.style.display="none",document.body?document.body.appendChild(a):f("Document body has not initialized. Wait to initialize Firebase until after the document is ready."),a.contentDocument?a.ra=a.contentDocument:a.contentWindow?a.ra=a.contentWindow.document:a.document&&(a.ra=a.document),this.ea=a;try{this.ea.ra.open(),this.ea.ra.write("<html><body></body></html>"),this.ea.ra.close()}catch(e){Mb("frame writing exception"),e.stack&&Mb(e.stack),Mb(e)}}function Ac(a){if(a.fc&&a.Zb&&a.uc.count()<(0<a.rb.length?2:1)){a.lc++;var b={};b.id=a.td,b.pw=a.ud,b.ser=a.lc;for(var b=a.Db(b),c="",d=0;0<a.rb.length&&1870>=a.rb[0].Hc.length+30+c.length;){var e=a.rb.shift(),c=c+"&seg"+d+"="+e.Bd+"&ts"+d+"="+e.Gd+"&d"+d+"="+e.Hc;d++}var b=b+c,f=a.lc;a.uc.add(f);var g=function(){a.uc.remove(f),Ac(a)},h=setTimeout(g,25e3);return zc(a,b,function(){clearTimeout(h),g()}),k}return o}function zc(a,b,c){setTimeout(function(){try{if(a.Zb){var d=a.ea.ra.createElement("script");d.type="text/javascript",d.async=k,d.src=b,d.onload=d.onreadystatechange=function(){var a=d.readyState;a&&"loaded"!==a&&"complete"!==a||(d.onload=d.onreadystatechange=l,d.parentNode&&d.parentNode.removeChild(d),c())},d.onerror=function(){Mb("Long-poll script failed to load: "+b),a.Zb=o,a.close()},a.ea.ra.body.appendChild(d)}}catch(e){}},1)}function Bc(){function a(a,c){c&&c.isAvailable()&&b.push(c)}var b=[],c=Cc;if("array"==da(c))for(var d=0;d<c.length;++d)a(0,c[d]);else dc(c,a);this.bc=b}function Dc(a,b,c,d,e,f){this.id=a,this.e=Ob("c:"+this.id+":"),this.tc=c,this.nb=d,this.N=e,this.sc=f,this.P=b,this.Pb=[],this.Fc=0,this.Ec=new Bc,this.na=0,this.e("Connection created"),Ec(this)}function Ec(a){var b,c=a.Ec;0<c.bc.length?b=c.bc[0]:f(Error("No transports available")),a.I=new b("c:"+a.id+":"+a.Fc++,a.P);var d=Fc(a,a.I),e=Gc(a,a.I);a.Ab=a.I,a.xb=a.I,a.A=l,setTimeout(function(){a.I&&a.I.open(d,e)},0)}function Gc(a,b){return function(c){b===a.I?(a.I=l,c||0!==a.na?1===a.na&&a.e("Realtime connection lost."):(a.e("Realtime connection failed."),"s-"===a.P.ca.substr(0,2)&&(O.removeItem(a.P.kb),a.P.ca=a.P.host)),a.close()):b===a.A?(c=a.A,a.A=l,(a.Ab===c||a.xb===c)&&a.close()):a.e("closing an old connection")}}function Fc(a,b){return function(c){if(2!=a.na)if(b===a.xb){var d=Tb("t",c),c=Tb("d",c);if("c"==d){if(d=Tb("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,g=c.h;a.$b=c.s,qb(a.P,g),0==a.na&&(a.I.start(),c=a.I,a.e("Realtime connection established."),a.I=c,a.na=1,a.nb&&(a.nb(d),a.nb=l),"5"!==e&&Rb("Protocol version mismatch detected"),c=1<a.Ec.bc.length?a.Ec.bc[1]:l)&&(a.A=new c("c:"+a.id+":"+a.Fc++,a.P,a.$b),a.A.open(Fc(a,a.A),Gc(a,a.A)))}else if("n"===d){for(a.e("recvd end transmission on primary"),a.xb=a.A,c=0;c<a.Pb.length;++c)a.Mb(a.Pb[c]);a.Pb=[],Hc(a)}else"s"===d?(a.e("Connection shutdown command received. Shutting down..."),a.sc&&(a.sc(c),a.sc=l),a.N=l,a.close()):"r"===d?(a.e("Reset packet received.  New host: "+c),qb(a.P,c),1===a.na?a.close():(Ic(a),Ec(a))):Pb("Unknown control packet command: "+d)}else"d"==d&&a.Mb(c)}else b===a.A?(d=Tb("t",c),c=Tb("d",c),"c"==d?"t"in c&&(c=c.t,"a"===c?(a.A.start(),a.e("sending client ack on secondary"),a.A.send({t:"c",d:{t:"a",d:{}}}),a.e("Ending transmission on primary"),a.I.send({t:"c",d:{t:"n",d:{}}}),a.Ab=a.A,Hc(a)):"r"===c&&(a.e("Got a reset on secondary, closing it"),a.A.close(),(a.Ab===a.A||a.xb===a.A)&&a.close())):"d"==d?a.Pb.push(c):f(Error("Unknown protocol layer: "+d))):a.e("message on old connection")}}function Hc(a){a.Ab===a.A&&a.xb===a.A&&(a.e("cleaning up and promoting a connection: "+a.A.kc),a.I=a.A,a.A=l)}function Ic(a){a.e("Shutting down all connections"),a.I&&(a.I.close(),a.I=l),a.A&&(a.A.close(),a.A=l)}function Jc(a,b,c,d){this.id=Kc++,this.e=Ob("p:"+this.id+":"),this.yb=k,this.da={},this.S=[],this.ob=0,this.mb=[],this.U=o,this.Ub=1e3,this.Nb=b||ca,this.Lb=c||ca,this.lb=d||ca,this.P=a,this.wc=l,this.Rb=[],this.vb={},this.Ad=0,this.ib=this.Qc=l,setTimeout(v(this.Ic,this),0)}function Mc(a,b,c,d,e){a.e("Listen on "+b+" for "+c);var f={p:b},d=jb(d,function(a){return Ia(a)});"{}"!==c&&(f.q=d),a.xa("l",f,function(d){a.e("listen response",d),d=d.s,"ok"!==d&&Nc(a,b,c),e&&e(d)})}function Oc(a){var b=a.Aa;a.U&&b&&a.xa("auth",{cred:b.kd},function(c){var d=c.s,c=c.d||"error";"ok"!==d&&a.Aa===b&&delete a.Aa,b.Kc?"ok"!==d&&b.Fb&&b.Fb(d,c):(b.Kc=k,b.ha&&b.ha(d,c)),a.lb("ok"===d)})}function Pc(a,b,c,d){a.U?Qc(a,"o",b,c,d):a.mb.push({vc:b,action:"o",data:c,C:d})}function Qc(a,b,c,d,e){c={p:c,d:d},a.e("onDisconnect "+b,c),a.xa(b,c,function(a){e&&setTimeout(function(){e(a.s)},0)})}function Rc(a,b,c,d,e,f){c={p:c,d:d},t(f)&&(c.h=f),a.S.push({action:b,Xc:c,C:e}),a.ob++,b=a.S.length-1,a.U&&Sc(a,b)}function Sc(a,b){var c=a.S[b].action,d=a.S[b].C;a.xa(c,a.S[b].Xc,function(e){a.e(c+" response",e),delete a.S[b],a.ob--,0===a.ob&&(a.S=[]),d&&d(e.s)})}function Nc(a,b,c){b=new I(b).toString(),c||(c="{}");var d=a.da[b][c];return delete a.da[b][c],d}function Tc(){this.n=this.D=l}function Uc(a,b,c){if(b.f())a.D=c,a.n=l;else if(a.D!==l)a.D=a.D.pa(b,c);else{a.n==l&&(a.n=new rc);var d=F(b);a.n.contains(d)||a.n.add(d,new Tc),a=a.n.get(d),b=J(b),Uc(a,b,c)}}function Vc(a,b){if(b.f())return a.D=l,a.n=l,k;if(a.D!==l){if(a.D.J())return o;var c=a.D;return a.D=l,c.w(function(b,c){Uc(a,new I(b),c)}),Vc(a,b)}return a.n!==l?(c=F(b),b=J(b),a.n.contains(c)&&Vc(a.n.get(c),b)&&a.n.remove(c),a.n.f()?(a.n=l,k):o):k}function Wc(a,b,c){a.D!==l?c(b,a.D):a.w(function(a,d){var e=new I(b.toString()+"/"+a);Wc(d,e,c)})}function Xc(){this.Ia=P}function T(a,b){return a.Ia.G(b)}function U(a,b,c){a.Ia=a.Ia.pa(b,c)}function Yc(){this.ya=new Xc,this.L=new Xc,this.Ja=new Xc,this.qb=new Na}function Zc(a,b){for(var c=T(a.ya,b),d=T(a.L,b),e=L(a.qb,b),f=o,g=e;g!==l;){if(g.j()!==l){f=k;break}g=g.parent()}return f?o:(c=$c(c,d,e),c!==d?(U(a.L,b,c),k):o)}function $c(a,b,c){return c.f()?a:c.j()!==l?b:(a=a||P,c.w(function(d){var d=d.name(),e=a.R(d),f=b.R(d),g=L(c,d),e=$c(e,f,g);a=a.H(d,e)}),a)}function ad(a,b){ib(b,function(b){var c=b.Cd,b=L(a.qb,b.path),d=b.j();z(d!==l,"pendingPut should not be null."),d===c&&M(b,l)})}function bd(){this.Ba=[]}function cd(a,b){if(0!==b.length){a.Ba.push.apply(a.Ba,b);for(var c=0;c<a.Ba.length;c++)if(a.Ba[c]){var d=a.Ba[c];a.Ba[c]=l;var e=d.ha;e(d.ad,d.sb)}a.Ba=[]}}function V(a,b,c,d){this.type=a,this.ka=b,this.Y=c,this.sb=d}function dd(a){this.M=a,this.ia=[],this.Jc=new bd}function ed(a,b,c,d,e){a.ia.push({type:b,ha:c,cancel:d,Z:e});var d=[],f=fd(a.g);a.gb&&f.push(new V("value",a.g));for(var g=0;g<f.length;g++)if(f[g].type===b){var h=new W(a.M.u,a.M.path);f[g].Y&&(h=h.F(f[g].Y)),d.push({ha:e?v(c,e):c,ad:new S(f[g].ka,h),sb:f[g].sb})}cd(a.Jc,d)}function gd(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.type,g=new W(a.M.u,a.M.path);for(b[d].Y&&(g=g.F(b[d].Y)),g=new S(b[d].ka,g),"value"!==e.type||g.eb()?"value"!==e.type&&(f+=" "+g.name()):f+="("+g.T()+")",Mb(a.M.u.o.id+": event:"+a.M.path+":"+a.M.Ga()+":"+f),f=0;f<a.ia.length;f++){var h=a.ia[f];b[d].type===h.type&&c.push({ha:h.Z?v(h.ha,h.Z):h.ha,ad:g,sb:e.sb})}}cd(a.Jc,c)}function fd(a){var b=[];if(!a.J()){var c=l;a.w(function(a,d){b.push(new V("child_added",d,a,c)),c=a})}return b}function hd(a){a.gb||(a.gb=k,gd(a,[new V("value",a.g)]))}function kd(a,b){dd.call(this,a),this.g=b}function ld(a,b){this.Gb=a,this.qc=b}function md(a,b,c,d,e){var f=a.G(c),g=b.G(c),d=new ld(d,e),e=nd(d,c,f,g),h=o;if(!f.f()&&!g.f()&&f.k()!==g.k())var h=a.G(c.parent()),i=b.G(c.parent()),j=Ka(c),h=h.V(j,f)!=i.V(j,g);if(e||h)for(f=c,c=e,g=h;f.parent()!==l;){var m=a.G(f),e=b.G(f),h=f.parent();(!d.Gb||L(d.Gb,h).j())&&(i=b.G(h),j=[],f=Ka(f),m.f()?(m=i.V(f,e),j.push(new V("child_added",e,f,m))):e.f()?j.push(new V("child_removed",m,f)):(m=i.V(f,e),g&&j.push(new V("child_moved",e,f,m)),c&&j.push(new V("child_changed",e,f,m))),d.qc(h,i,j)),g&&(g=o,c=k),f=h}}function nd(a,b,c,d){var e,f=[];return c===d?e=o:c.J()&&d.J()?e=c.j()!==d.j():c.J()?(od(a,b,P,d,f),e=k):d.J()?(od(a,b,c,P,f),e=k):e=od(a,b,c,d,f),e?a.qc(b,d,f):c.k()!==d.k()&&a.qc(b,d,l),e}function od(a,b,c,d,e){var f,g,h,i,j=o,m=!a.Gb||!L(a.Gb,b).f(),n=[],p=[],q=[],r=[],s={},u={};for(f=c.Pa(),h=Ya(f),g=d.Pa(),i=Ya(g);h!==l||i!==l;)if(c=h===l?1:i===l?-1:h.key===i.key?0:bc({name:h.key,wa:h.value.k()},{name:i.key,wa:i.value.k()}),0>c?(j=ta(s,h.key),t(j)?(q.push({Lc:h,cd:n[j]}),n[j]=l):(u[h.key]=p.length,p.push(h)),j=k,h=Ya(f)):(c>0?(j=ta(u,i.key),t(j)?(q.push({Lc:p[j],cd:i}),p[j]=l):(s[i.key]=n.length,n.push(i)),j=k):(c=b.F(i.key),(c=nd(a,c,h.value,i.value))&&(r.push(i),j=k),h=Ya(f)),i=Ya(g)),!m&&j)return k;for(m=0;m<p.length;m++)(s=p[m])&&(c=b.F(s.key),nd(a,c,s.value,P),e.push(new V("child_removed",s.value,s.key)));for(m=0;m<n.length;m++)(s=n[m])&&(c=b.F(s.key),p=d.V(s.key,s.value),nd(a,c,P,s.value),e.push(new V("child_added",s.value,s.key,p)));for(m=0;m<q.length;m++)s=q[m].Lc,n=q[m].cd,c=b.F(n.key),p=d.V(n.key,n.value),e.push(new V("child_moved",n.value,n.key,p)),(c=nd(a,c,s.value,n.value))&&r.push(n);for(m=0;m<r.length;m++)a=r[m],p=d.V(a.key,a.value),e.push(new V("child_changed",a.value,a.key,p));return j}function pd(){this.O=this.oa=l,this.set={}}function qd(a){return a.contains("default")}function rd(a){return a.oa!=l&&qd(a)}function sd(a,b){dd.call(this,a),this.g=P,this.Tb(b,fd(b))}function td(a,b,c,d){if(a.J())return l;var e=l;return(d?a.mc:a.w).call(a,function(a,d){return ud(b,a,d)&&(e=a,c--,0===c)?k:void 0}),e}function ud(a,b,c){for(var d=0;d<a.length;d++)if(!a[d](b,c.k()))return o;return k}function vd(a,b){this.o=a,this.i=b,this.Sc=b.Ia,this.qa=new Na}function yd(a,b,c,d,e){for(var f=a.get(b),g=o,h=f.ia.length-1;h>=0;h--){var i=f.ia[h];if(!(c&&i.type!==c||d&&i.ha!==d||e&&i.Z!==e)&&(f.ia.splice(h,1),g=k,c&&d))break}return(c=g&&!(0<f.ia.length))&&a.remove(b),c}function zd(a,b,c,d,e,f){var g=b.path(),g=L(a.qa,g),c=c?c.Ga():l,h=[];if(c&&"default"!==c?yd(b,c,d,e,f)&&h.push(c):ib(b.keys(),function(a){yd(b,a,d,e,f)&&h.push(a)}),b.f()&&M(g,l),c=wd(g),0<h.length&&!c){for(var i=g,j=g.parent(),c=o;!c&&j;){var m=j.j();if(m){z(!rd(m));var n=i.name(),p=o;sc(m,function(a,b){p=b.nc(n)||p}),p&&(c=k)}i=j,j=j.parent()}if(i=l,!rd(b)){j=b.oa,b.oa=l;var q=[],r=function(b){var c=b.j();c&&qd(c)?(q.push(c.path()),c.oa==l&&c.setActive(xd(a,c))):(c&&c.oa==l&&c.setActive(xd(a,c)),b.w(r))};r(g),i=q,j&&j()}return c?l:i}return l}function Ad(a,b,c){Pa(L(a.qa,b),function(a){(a=a.j())&&sc(a,function(a,b){hd(b)})},c,k)}function Bd(a,b,c){function d(a){for(var b=0;b<c.length;++b)if(c[b].contains(a))return k;return o}var e=a.Sc,f=a.i.Ia;a.Sc=f,md(e,f,b,a.qa,function(c,e,f){if(b.contains(c)){var g=d(c);g&&Ad(a,c,o),a.Sb(c,e,f),g&&Ad(a,c,k)}else a.Sb(c,e,f)}),d(b)&&Ad(a,b,k)}function wd(a){return Qa(a,function(a){return a.j()&&rd(a.j())})}function xd(a,b){if(a.o){var c=b.keys(),d=a.o,e=function(d){"ok"!==d?(Rb("on() or once() for "+b.path().toString()+" failed: "+d),b&&sc(b,function(a,b){for(var c=0;c<b.ia.length;c++){var d=b.ia[c];d.cancel&&(d.Z?v(d.cancel,d.Z):d.cancel)()}}),zd(a,b)):ib(c,function(a){(a=b.get(a))&&hd(a)})},f=b.toString(),g=b.path().toString();return d.da[g]=d.da[g]||{},z(!d.da[g][f],"listen() called twice for same path/queryId."),d.da[g][f]={Ua:b.Ua(),C:e},d.U&&Mc(d,g,f,b.Ua(),e),v(a.o.dd,a.o,b.path(),b.toString(),b.Ua())}return ca}function Cd(a,b,c,d,e,f){var g=b.path();if(f!==l){var h=[];return d.J()||d.w(function(a,b){h.push({path:g.F(a),Da:b}),delete f[a]}),dc(f,function(a,b){h.push({path:g.F(b),Da:P})}),h}var b=a.bb(g,b,d,e),i=P,j=[];return dc(b,function(b,f){var g=new I(f);b?i=i.H(f,d.G(g)):j=j.concat(Dd(a,d.G(g),L(c,g),e))}),[{path:g,Da:i}].concat(j)}function Ed(a,b,c,d,e){for(var f=L(a.qa,b),g=f.parent(),h=o;!h&&g!==l;){var i=g.j();i!==l&&(qd(i)?h=k:(i=a.bb(b,i,c,d),f=f.name(),ta(i,f)&&(h=k))),f=g,g=g.parent()}return h?[{path:b,Da:c}]:(g=L(a.qa,b),h=g.j(),h!==l?qd(h)?[{path:b,Da:c}]:Cd(a,h,g,c,d,e):Dd(a,c,g,d))}function Dd(a,b,c,d){var e=c.j();if(e!==l)return qd(e)?[{path:c.path(),Da:b}]:Cd(a,e,c,b,d,l);if(b.J())return[];var f=[];return b.w(function(b,e){var g=new I(b);f=f.concat(Dd(a,e,L(c,g),d))}),f}function Fd(a){this.P=a,this.X=lc(a),this.o=new Jc(this.P,v(this.Nb,this),v(this.Lb,this),v(this.lb,this));
var b=v(function(){return new ic(this.X,this.o)},this),a=a.toString();kc[a]||(kc[a]=b()),this.bd=kc[a],this.Xa=new Na,this.Ya=new Xc,this.i=new Yc,this.Q=new vd(this.o,this.i.Ja),this.Oc=new Xc,this.oc=new vd(l,this.Oc),Gd(this,"connected",o),Gd(this,"authenticated",o),this.N=new Tc}function Gd(a,b,c){b=new I("/.info/"+b),U(a.Oc,b,R(c)),Bd(a.oc,b,[b])}function Jd(a,b,c,d){var e=R(c);Pc(a.o,b.toString(),e.T(k),function(c){"ok"===c&&Uc(a.N,b,e),X(d,c)})}function Kd(a){gc(a.X,"deprecated_on_disconnect"),a.bd.Bc.deprecated_on_disconnect=k}function X(a,b,c){if(a)if("ok"==b)a(l,c);else{var d=b=(b||"error").toUpperCase();c&&(d+=": "+c),c=Error(d),c.code=b,a(c)}}function Ld(a,b){var c=b||a.Xa;if(b||Md(a,c),c.j()!==l){var d=Nd(a,c);if(z(0<d.length),2!==d[0].status&&4!==d[0].status){for(var e=c.path(),f=0;f<d.length;f++)z(1===d[f].status,"tryToSendTransactionQueue_: items in queue should all be run."),d[f].status=2,d[f].$c++;c=T(a.i.L,e).hash(),U(a.i.L,e,T(a.i.Ja,e));for(var g=T(a.Ya,e).T(k),h=Gb(),i={},j=0;j<d.length;j++)d[j].gc&&(i[d[j].path.toString()]=d[j].path);var m,n=[];for(m in i)n.push(i[m]);for(f=0;f<n.length;f++)M(L(a.i.qb,n[f]),h);a.o.put(e.toString(),g,function(b){for(a.e("transaction put response",{path:e.toString(),status:b}),f=0;f<n.length;f++){var c=L(a.i.qb,n[f]),g=c.j();z(g!==l,"sendTransactionQueue_: pendingPut should not be null."),g===h&&(M(c,l),U(a.i.L,n[f],T(a.i.ya,n[f])))}if("ok"===b){for(b=[],f=0;f<d.length;f++)d[f].status=3,d[f].C&&(c=Od(a,d[f].path),b.push(v(d[f].C,l,l,k,c))),d[f].dc();for(Md(a,L(a.Xa,e)),Ld(a),f=0;f<b.length;f++)b[f]()}else{if("datastale"===b)for(f=0;f<d.length;f++)d[f].status=4===d[f].status?5:1;else for(Rb("transaction at "+e+" failed: "+b),f=0;f<d.length;f++)d[f].status=5,d[f].ec=b;b=Hd(a,e),Bd(a.Q,b,[e])}},c)}}else c.eb()&&c.w(function(b){Ld(a,b)})}function Hd(a,b){var c=Pd(a,b),d=c.path(),e=Nd(a,c);if(U(a.i.Ja,d,T(a.i.L,d)),U(a.Ya,d,T(a.i.L,d)),0!==e.length){for(var f=c=T(a.i.Ja,d),g=[],h=0;h<e.length;h++){var i,j=La(d,e[h].path),m=o;if(z(j!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),5===e[h].status)m=k,i=e[h].ec;else if(1===e[h].status)if(25<=e[h].$c)m=k,i="maxretry";else{var n=e[h].update(c.G(j).T());t(n)?(za("transaction failed: Data returned ",n),n=R(n),c=c.pa(j,n),e[h].gc&&(f=f.pa(j,n))):(m=k,i="nodata")}m&&(e[h].dc(),e[h].status=3,e[h].C&&(m=new W(a,e[h].path),j=new S(c.G(j),m),g.push("nodata"===i?v(e[h].C,l,l,o,j):v(e[h].C,l,Error(i),o,j))))}for(i=T(a.i.L,d).k(),c=c.Cb(i),f=f.Cb(i),U(a.Ya,d,c),U(a.i.Ja,d,f),Md(a,a.Xa),h=0;h<g.length;h++)g[h]();Ld(a)}return d}function Pd(a,b){for(var c,d=a.Xa;(c=F(b))!==l&&d.j()===l;)d=L(d,c),b=J(b);return d}function Nd(a,b){var c=[];return Qd(a,b,c),c.sort(function(a,b){return a.Uc-b.Uc}),c}function Qd(a,b,c){var d=b.j();if(d!==l)for(var e=0;e<d.length;e++)c.push(d[e]);b.w(function(b){Qd(a,b,c)})}function Md(a,b){var c=b.j();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d,M(b,0<c.length?c:l)}b.w(function(b){Md(a,b)})}function Id(a,b){var c=Pd(a,b).path(),d=L(a.Xa,b);return Qa(d,function(a){Rd(a)}),Rd(d),Pa(d,function(a){Rd(a)}),c}function Rd(a){var b=a.j();if(b!==l){for(var c=[],d=-1,e=0;e<b.length;e++)4!==b[e].status&&(2===b[e].status?(z(d===e-1,"All SENT items should be at beginning of queue."),d=e,b[e].status=4,b[e].ec="set"):(z(1===b[e].status),b[e].dc(),b[e].C&&c.push(v(b[e].C,l,Error("set"),o,l))));for(-1===d?M(a,l):b.length=d+1,e=0;e<c.length;e++)c[e]()}}function Od(a,b){var c=new W(a,b);return new S(T(a.Ya,b),c)}function Y(){this.Va={}}function $(a,b,c){this.ub=a,this.O=b,this.va=c}function W(){var a,b,c;if(arguments[0]instanceof Fd)c=arguments[0],a=arguments[1];else{A("new Firebase",1,2,arguments.length);var d=arguments[0];b=a="";var e=k,g="";if(u(d)){var h=d.indexOf("//");if(h>=0)var i=d.substring(0,h-1),d=d.substring(h+2);h=d.indexOf("/"),-1===h&&(h=d.length),a=d.substring(0,h);var d=d.substring(h+1),j=a.split(".");if(3==j.length){if(h=j[2].indexOf(":"),e=h>=0?"https"===i:k,"firebase"===j[1])Qb(a+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");else for(b=j[0],g="",d=("/"+d).split("/"),i=0;i<d.length;i++)if(0<d[i].length){h=d[i];try{h=decodeURIComponent(h.replace(/\+/g," "))}catch(m){}g+="/"+h}b=b.toLowerCase()}else b=l}e||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Rb("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),a=new pb(a,e,b),b=new I(g),e=b.toString(),(d=!u(a.host))||(d=0===a.host.length)||(d=!xa(a.kb))||(d=0!==e.length)&&(e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),d=!(u(e)&&0!==e.length&&!wa.test(e))),d&&f(Error(B("new Firebase",1,o)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')),arguments[1]?arguments[1]instanceof Y?c=arguments[1]:f(Error("Expected a valid Firebase.Context for second argument to new Firebase()")):c=Y.pd(),e=a.toString(),d=ta(c.Va,e),d||(d=new Fd(a),c.Va[e]=d),c=d,a=b}G.call(this,c,a)}function Nb(a,b){z(!b||a===k||a===o,"Can't turn on custom loggers persistently."),a===k?("undefined"!=typeof console&&("function"==typeof console.log?Kb=v(console.log,console):"object"==typeof console.log&&(Kb=function(a){console.log(a)})),b&&O.setItem("logging_enabled","true")):a?Kb=a:(Kb=l,O.removeItem("logging_enabled"))}var j=void 0,k=!0,l=null,o=!1,r,ba=this;Math.floor(2147483648*Math.random()).toString(36);var oa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},pa=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,ua={},ra={},va=/[\[\].#$\/]/,wa=/[\[\].#$]/;G.prototype.pc=function(a,b){A("Query.on",2,4,arguments.length),Ea("Query.on",a,o),C("Query.on",2,b,o);var c=Ha("Query.on",arguments[2],arguments[3]);return this.u.Eb(this,a,b,c.cancel,c.Z),b},G.prototype.on=G.prototype.pc,G.prototype.Kb=function(a,b,c){A("Query.off",0,3,arguments.length),Ea("Query.off",a,k),C("Query.off",2,b,k),sa("Query.off",3,c),this.u.Wb(this,a,b,c)},G.prototype.off=G.prototype.Kb,G.prototype.wd=function(a,b){function c(g){f&&(f=o,e.Kb(a,c),b.call(d.Z,g))}A("Query.once",2,4,arguments.length),Ea("Query.once",a,o),C("Query.once",2,b,o);var d=Ha("Query.once",arguments[2],arguments[3]),e=this,f=k;this.pc(a,c,function(){e.Kb(a,c),d.cancel&&d.cancel.call(d.Z)})},G.prototype.once=G.prototype.wd,G.prototype.rd=function(a){return A("Query.limit",1,1,arguments.length),(!fa(a)||Math.floor(a)!==a||0>=a)&&f("Query.limit: First argument must be a positive integer."),new G(this.u,this.path,a,this.ba,this.ma,this.sa,this.Oa)},G.prototype.limit=G.prototype.rd,G.prototype.Fd=function(a,b){return A("Query.startAt",0,2,arguments.length),Da("Query.startAt",1,a,k),Fa("Query.startAt",b),t(a)||(b=a=l),new G(this.u,this.path,this.ua,a,b,this.sa,this.Oa)},G.prototype.startAt=G.prototype.Fd,G.prototype.ld=function(a,b){return A("Query.endAt",0,2,arguments.length),Da("Query.endAt",1,a,k),Fa("Query.endAt",b),new G(this.u,this.path,this.ua,this.ba,this.ma,a,b)},G.prototype.endAt=G.prototype.ld,G.prototype.Ga=function(){var a=Ja(Ia(this));return"{}"===a?"default":a},r=I.prototype,r.toString=function(){for(var a="",b=this.$;b<this.m.length;b++)""!==this.m[b]&&(a+="/"+this.m[b]);return a||"/"},r.parent=function(){if(this.$>=this.m.length)return l;for(var a=[],b=this.$;b<this.m.length-1;b++)a.push(this.m[b]);return new I(a,0)},r.F=function(a){for(var b=[],c=this.$;c<this.m.length;c++)b.push(this.m[c]);if(a instanceof I)for(c=a.$;c<a.m.length;c++)b.push(a.m[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new I(b,0)},r.f=function(){return this.$>=this.m.length},r.contains=function(a){var b=0;if(this.m.length>a.m.length)return o;for(;b<this.m.length;){if(this.m[b]!==a.m[b])return o;++b}return k},r=Na.prototype,r.j=function(){return this.z.value},r.eb=function(){return 0<this.z.ic},r.f=function(){return this.j()===l&&!this.eb()},r.w=function(a){for(var b in this.z.children)a(new Na(b,this,this.z.children[b]))},r.path=function(){return new I(this.pb===l?this.va:this.pb.path()+"/"+this.va)},r.name=aa("va"),r.parent=aa("pb"),r=Ta.prototype,r.ja=function(a,b){return new Ta(this.La,this.aa.ja(a,b,this.La).copy(l,l,o,l,l))},r.remove=function(a){return new Ta(this.La,this.aa.remove(a,this.La).copy(l,l,o,l,l))},r.get=function(a){for(var b,c=this.aa;!c.f();){if(b=this.La(a,c.key),0===b)return c.value;0>b?c=c.left:b>0&&(c=c.right)}return l},r.f=function(){return this.aa.f()},r.count=function(){return this.aa.count()},r.jb=function(){return this.aa.jb()},r.Ra=function(){return this.aa.Ra()},r.ta=function(a){return this.aa.ta(a)},r.Ha=function(a){return this.aa.Ha(a)},r.Pa=function(a){return new Xa(this.aa,a)},r=Za.prototype,r.copy=function(a,b,c,d,e){return new Za(a!=l?a:this.key,b!=l?b:this.value,c!=l?c:this.color,d!=l?d:this.left,e!=l?e:this.right)},r.count=function(){return this.left.count()+1+this.right.count()},r.f=q(o),r.ta=function(a){return this.left.ta(a)||a(this.key,this.value)||this.right.ta(a)},r.Ha=function(a){return this.right.Ha(a)||a(this.key,this.value)||this.left.Ha(a)},r.jb=function(){return $a(this).key},r.Ra=function(){return this.right.f()?this.key:this.right.Ra()},r.ja=function(a,b,c){var d,e;return e=this,d=c(a,e.key),e=0>d?e.copy(l,l,l,e.left.ja(a,b,c),l):0===d?e.copy(l,b,l,l,l):e.copy(l,l,l,l,e.right.ja(a,b,c)),ab(e)},r.remove=function(a,b){var c,d;if(c=this,0>b(a,c.key))!c.left.f()&&!c.left.K()&&!c.left.left.K()&&(c=cb(c)),c=c.copy(l,l,l,c.left.remove(a,b),l);else{if(c.left.K()&&(c=db(c)),!c.right.f()&&!c.right.K()&&!c.right.left.K()&&(c=eb(c),c.left.left.K()&&(c=db(c),c=eb(c))),0===b(a,c.key)){if(c.right.f())return Va;d=$a(c.right),c=c.copy(d.key,d.value,l,l,bb(c.right))}c=c.copy(l,l,l,l,c.right.remove(a,b))}return ab(c)},r.K=aa("color"),r=gb.prototype,r.copy=function(){return this},r.ja=function(a,b){return new Za(a,b,j,j,j)},r.remove=function(){return this},r.get=q(l),r.count=q(0),r.f=q(k),r.ta=q(o),r.Ha=q(o),r.jb=q(l),r.Ra=q(l),r.K=q(o);var Va=new gb,hb=Array.prototype,ib=hb.forEach?function(a,b,c){hb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=u(a)?a.split(""):a,f=0;d>f;f++)f in e&&b.call(c,e[f],f,a)},jb=hb.map?function(a,b,c){return hb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=u(a)?a.split(""):a,g=0;d>g;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};ja(lb,kb),lb.prototype.reset=function(){this.B[0]=1732584193,this.B[1]=4023233417,this.B[2]=2562383102,this.B[3]=271733878,this.B[4]=3285377520,this.Dc=this.fb=0},lb.prototype.update=function(a,b){t(b)||(b=a.length);var c=this.hc,d=this.fb,e=0;if(u(a))for(;b>e;)c[d++]=a.charCodeAt(e++),64==d&&(mb(this,c),d=0);else for(;b>e;)c[d++]=a[e++],64==d&&(mb(this,c),d=0);this.fb=d,this.Dc+=b},nb.prototype.setItem=function(a,b){D(this.Ka,a)||(this.length+=1),this.Ka[a]=b},nb.prototype.getItem=function(a){return D(this.Ka,a)?this.Ka[a]:l},nb.prototype.removeItem=function(a){D(this.Ka,a)&&(this.length-=1,delete this.Ka[a])};var O=l;if("undefined"!=typeof sessionStorage)try{sessionStorage.setItem("firebase-sentinel","cache"),sessionStorage.removeItem("firebase-sentinel"),O=sessionStorage}catch(ob){O=new nb}else O=new nb;pb.prototype.toString=function(){return(this.Yb?"https://":"http://")+this.host};var rb,sb,tb,ub;ub=tb=sb=rb=o;var wb;if(wb=vb()){var xb=ba.navigator;rb=0==wb.indexOf("Opera"),sb=!rb&&-1!=wb.indexOf("MSIE"),tb=!rb&&-1!=wb.indexOf("WebKit"),ub=!rb&&!tb&&"Gecko"==xb.product}var yb=sb,zb=ub,Ab=tb,Bb;if(rb&&ba.opera){var Cb=ba.opera.version;"function"==typeof Cb&&Cb()}else zb?Bb=/rv\:([^\);]+)(\)|;)/:yb?Bb=/MSIE\s+([^\);]+)(\)|;)/:Ab&&(Bb=/WebKit\/(\S+)/),Bb&&Bb.exec(vb());var Db=l,Eb=l,Gb,Hb=1;Gb=function(){return Hb++};var Kb=l,Lb=k,Ub=0;r=Yb.prototype,r.J=q(k),r.k=aa("Ta"),r.Cb=function(a){return new Yb(this.D,a)},r.R=function(){return P},r.G=function(a){return F(a)===l?this:P},r.V=q(l),r.H=function(a,b){return new Q(new Ta,this.Ta).H(a,b)},r.pa=function(a,b){var c=F(a);return c===l?b:this.H(c,P.pa(J(a),b))},r.f=q(o),r.Jb=q(0),r.T=function(a){return a&&this.k()!==l?{".value":this.j(),".priority":this.k()}:this.j()},r.hash=function(){var a="";this.k()!==l&&(a+="priority:"+Zb(this.k())+":");var b=typeof this.D,a=a+(b+":"),a="number"===b?a+Wb(this.D):a+this.D;return Ib(a)},r.j=aa("D"),r.toString=function(){return"string"==typeof this.D?'"'+this.D+'"':this.D},r=Q.prototype,r.J=q(o),r.k=aa("Ta"),r.Cb=function(a){return new Q(this.n,a)},r.H=function(a,b){var c=this.n.remove(a);return b&&b.f()&&(b=l),b!==l&&(c=c.ja(a,b)),b&&b.k()!==l?new $b(c,l,this.Ta):new Q(c,this.Ta)},r.pa=function(a,b){var c=F(a);if(c===l)return b;var d=this.R(c).pa(J(a),b);return this.H(c,d)},r.f=function(){return this.n.f()},r.Jb=function(){return this.n.count()};var ac=/^\d+$/;r=Q.prototype,r.T=function(a){if(this.f())return l;var b={},c=0,d=0,e=k;if(this.w(function(f,g){b[f]=g.T(a),c++,e&&ac.test(f)?d=Math.max(d,Number(f)):e=o}),!a&&e&&2*c>d){var f,g=[];for(f in b)g[f]=b[f];return g}return a&&this.k()!==l&&(b[".priority"]=this.k()),b},r.hash=function(){var a="";return this.k()!==l&&(a+="priority:"+Zb(this.k())+":"),this.w(function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)}),""===a?"":Ib(a)},r.R=function(a){return a=this.n.get(a),a===l?P:a},r.G=function(a){var b=F(a);return b===l?this:this.R(b).G(J(a))},r.V=function(a){return Wa(this.n,a)},r.Mc=function(){return this.n.jb()},r.Nc=function(){return this.n.Ra()},r.w=function(a){return this.n.ta(a)},r.mc=function(a){return this.n.Ha(a)},r.Pa=function(){return this.n.Pa()},r.toString=function(){var a="{",b=k;return this.w(function(c,d){b?b=o:a+=", ",a+='"'+c+'" : '+d.toString()}),a+="}"};var P=new Q(new Ta);ja($b,Q),r=$b.prototype,r.H=function(a,b){var c=this.R(a),d=this.n,e=this.la;return c!==l&&(d=d.remove(a),e=e.remove({name:a,wa:c.k()})),b&&b.f()&&(b=l),b!==l&&(d=d.ja(a,b),e=e.ja({name:a,wa:b.k()},b)),new $b(d,e,this.k())},r.V=function(a,b){var c=Wa(this.la,{name:a,wa:b.k()});return c?c.name:l},r.w=function(a){return this.la.ta(function(b,c){return a(b.name,c)})},r.mc=function(a){return this.la.Ha(function(b,c){return a(b.name,c)})},r.Pa=function(){return this.la.Pa(function(a,b){return{key:a.name,value:b}})},r.Mc=function(){return this.la.f()?l:this.la.jb().name},r.Nc=function(){return this.la.f()?l:this.la.Ra().name},S.prototype.T=function(){return A("Firebase.DataSnapshot.val",0,0,arguments.length),this.z.T()},S.prototype.val=S.prototype.T,S.prototype.md=function(){return A("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.z.T(k)},S.prototype.exportVal=S.prototype.md,S.prototype.F=function(a){A("Firebase.DataSnapshot.child",0,1,arguments.length),fa(a)&&(a=String(a)),Ga("Firebase.DataSnapshot.child",a);var b=new I(a),c=this.Vb.F(b);return new S(this.z.G(b),c)},S.prototype.child=S.prototype.F,S.prototype.nc=function(a){A("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Ga("Firebase.DataSnapshot.hasChild",a);var b=new I(a);return!this.z.G(b).f()},S.prototype.hasChild=S.prototype.nc,S.prototype.k=function(){return A("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.z.k()},S.prototype.getPriority=S.prototype.k,S.prototype.forEach=function(a){if(A("Firebase.DataSnapshot.forEach",1,1,arguments.length),C("Firebase.DataSnapshot.forEach",1,a,o),this.z.J())return o;var b=this;return this.z.w(function(c,d){return a(new S(d,b.Vb.F(c)))})},S.prototype.forEach=S.prototype.forEach,S.prototype.eb=function(){return A("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.z.J()?o:!this.z.f()},S.prototype.hasChildren=S.prototype.eb,S.prototype.name=function(){return A("Firebase.DataSnapshot.name",0,0,arguments.length),this.Vb.name()},S.prototype.name=S.prototype.name,S.prototype.Jb=function(){return A("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.z.Jb()},S.prototype.numChildren=S.prototype.Jb,S.prototype.xd=function(){return A("Firebase.DataSnapshot.ref",0,0,arguments.length),this.Vb},S.prototype.ref=S.prototype.xd,fc.prototype.get=function(){return ec(this.$a)},hc.prototype.get=function(){var a=this.jd.get(),b=ec(a);if(this.Hb)for(var c in this.Hb)b[c]-=this.Hb[c];return this.Hb=a,b},ic.prototype.Wc=function(){var a,b=this.ac.get(),c={},d=o;for(a in b)0<b[a]&&D(this.Bc,a)&&(c[a]=b[a],d=k);d&&(b=this.o,b.U&&(c={c:c},b.e("reportStats",c),b.xa("s",c))),setTimeout(v(this.Wc,this),6e5*Math.random())};var jc={},kc={},mc=l;"undefined"!=typeof MozWebSocket?mc=MozWebSocket:"undefined"!=typeof WebSocket&&(mc=WebSocket);var oc;nc.prototype.open=function(a,b){this.fa=b,this.vd=a,this.e("websocket connecting to "+this.Ma),this.W=new mc(this.Ma),this.ab=o;var c=this;this.W.onopen=function(){c.e("Websocket connected."),c.ab=k},this.W.onclose=function(){c.e("Websocket connection was disconnected."),c.W=l,c.Fa()},this.W.onmessage=function(a){if(c.W!==l)if(a=a.data,gc(c.X,"bytes_received",a.length),pc(c),c.frames!==l)qc(c,a);else{a:{if(z(c.frames===l,"We already have a frame buffer"),4>=a.length){var b=Number(a);if(!isNaN(b)){c.Cc=b,c.frames=[],a=l;break a}}c.Cc=1,c.frames=[]}a!==l&&qc(c,a)}},this.W.onerror=function(){c.e("WebSocket error.  Closing connection."),c.Fa()}},nc.prototype.start=function(){},nc.isAvailable=function(){return!("undefined"!=typeof navigator&&"Opera"===navigator.appName||mc===l||oc)},nc.prototype.send=function(a){pc(this),a=y(a),gc(this.X,"bytes_sent",a.length),a=Vb(a,16384),1<a.length&&this.W.send(String(a.length));for(var b=0;b<a.length;b++)this.W.send(a[b])},nc.prototype.zb=function(){this.Ca=k,this.hb&&(clearTimeout(this.hb),this.hb=l),this.W&&(this.W.close(),this.W=l)},nc.prototype.Fa=function(){this.Ca||(this.e("WebSocket is closing itself"),this.zb(),this.fa&&(this.fa(this.ab),this.fa=l))},nc.prototype.close=function(){this.Ca||(this.e("WebSocket is being closed"),this.zb())},r=rc.prototype,r.add=function(a,b){this.set[a]=b!==l?b:k},r.contains=function(a){return D(this.set,a)},r.get=function(a){return this.contains(a)?this.set[a]:j},r.remove=function(a){delete this.set[a]},r.f=function(){var a;a:{for(a in this.set){a=o;break a}a=k}return a},r.count=function(){var a,b=0;for(a in this.set)b++;return b},r.keys=function(){var a,b=[];for(a in this.set)D(this.set,a)&&b.push(a);return b};var tc="pLPCommand",uc="pRTLPCB",wc,xc;vc.prototype.open=function(a,b){function c(){if(!d.Ca){d.ga=new yc(function(a,b,c){if(gc(d.X,"bytes_received",y(arguments).length),d.ga)if(d.za&&(clearTimeout(d.za),d.za=l),d.ab=k,"start"==a)d.id=b,d.Vc=c;else if("close"===a)if(b){d.ga.Zb=o;var e=d.Rc;e.jc=b,e.Ea=function(){d.Fa()},e.jc<e.Na&&(e.Ea(),e.Ea=l)}else d.Fa();else f(Error("Unrecognized command received: "+a))},function(a,b){gc(d.X,"bytes_received",y(arguments).length);var c=d.Rc;for(c.Qb[a]=b;c.Qb[c.Na];){var e=c.Qb[c.Na];delete c.Qb[c.Na];for(var f=0;f<e.length;++f)e[f]&&c.tc(e[f]);if(c.Na===c.jc){c.Ea&&(clearTimeout(c.Ea),c.Ea(),c.Ea=l);break}c.Na++}},function(){d.Fa()},d.Db);var a={start:"t"};a.ser=Math.floor(1e8*Math.random()),d.ga.cc&&(a.cb=d.ga.cc),a.v="5",d.$b&&(a.s=d.$b),a=d.Db(a),d.e("Connecting via long-poll to "+a),zc(d.ga,a,function(){})}}this.Gc=0,this.N=b,this.Rc=new cc(a),this.Ca=o;var d=this;if(this.za=setTimeout(function(){d.e("Timed out trying to connect."),d.Fa(),d.za=l},3e4),"complete"===document.readyState)c();else{var e=o,g=function(){document.body?e||(e=k,c()):setTimeout(g,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",g,o),window.addEventListener("load",g,o)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&g()},o),window.attachEvent("onload",g,o))}},vc.prototype.start=function(){var a=this.ga,b=this.Vc;for(a.td=this.id,a.ud=b,a.fc=k;Ac(a););a=this.id,b=this.Vc,this.Sa=document.createElement("iframe");var c={dframe:"t"};c.id=a,c.pw=b,a=this.Db(c),this.Sa.src=a,this.Sa.style.display="none",document.body.appendChild(this.Sa)},vc.isAvailable=function(){return!(xc||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||!wc&&!k)},vc.prototype.zb=function(){this.Ca=k,this.ga&&(this.ga.close(),this.ga=l),this.Sa&&(document.body.removeChild(this.Sa),this.Sa=l),this.za&&(clearTimeout(this.za),this.za=l)},vc.prototype.Fa=function(){this.Ca||(this.e("Longpoll is closing itself"),this.zb(),this.N&&(this.N(this.ab),this.N=l))},vc.prototype.close=function(){this.Ca||(this.e("Longpoll is being closed."),this.zb())},vc.prototype.send=function(a){a=y(a),gc(this.X,"bytes_sent",a.length);for(var a=qa(a),a=Fb(a,k),a=Vb(a,1840),b=0;b<a.length;b++){var c=this.ga;c.rb.push({Bd:this.Gc,Gd:a.length,Hc:a[b]}),c.fc&&Ac(c),this.Gc++}},yc.prototype.close=function(){if(this.fc=o,this.ea){this.ea.ra.body.innerHTML="";var a=this;setTimeout(function(){a.ea!==l&&(document.body.removeChild(a.ea),a.ea=l)},0)}var b=this.fa;b&&(this.fa=l,b())};var Cc=[vc,{isAvailable:q(o)},nc];Dc.prototype.xc=function(a){a={t:"d",d:a},1!==this.na&&f("Connection is not connected"),this.Ab.send(a)},Dc.prototype.Mb=function(a){this.tc(a)},Dc.prototype.close=function(){2!==this.na&&(this.e("Closing realtime connection."),this.na=2,Ic(this),this.N&&(this.N(),this.N=l))};var Kc=0,Lc=0;r=Jc.prototype,r.xa=function(a,b,c){var d=++this.Ad,a={r:d,a:a,b:b};this.e(y(a)),this.U?this.tb.xc(a):this.Rb.push(a),c&&(this.vb[d]=c)},r.Za=function(a,b,c){this.Aa={kd:a,Kc:o,ha:b,Fb:c},this.e("Authenticating using credential: "+this.Aa),Oc(this)},r.Bb=function(){delete this.Aa,this.lb(o),this.U&&this.xa("unauth",{})},r.dd=function(a,b,c){a=a.toString(),Nc(this,a,b)&&this.U&&(this.e("Unlisten on "+a+" for "+b),a={p:a},c=jb(c,function(a){return Ia(a)}),"{}"!==b&&(a.q=c),this.xa("u",a))},r.rc=function(a,b){this.U?Qc(this,"oc",a,l,b):this.mb.push({vc:a,action:"oc",data:l,C:b})},r.put=function(a,b,c,d){Rc(this,"p",a,b,c,d)},r.Mb=function(a){if("r"in a){this.e("from server: "+y(a));var b=a.r,c=this.vb[b];c&&(delete this.vb[b],c(a.b))}else"error"in a&&f("A server-side error has occurred: "+a.error),"a"in a&&(b=a.a,a=a.b,this.e("handleServerMessage",b,a),"d"===b?this.Nb(a.p,a.d):"m"===b?this.Nb(a.p,a.d,k):"c"===b?(b=a.p,a=(a=a.q)?jb(a,function(a){return Ja(a)}).join("$"):"{}",(a=Nc(this,b,a))&&a.C&&a.C("permission_denied")):"ac"===b?(b=a.s,a=a.d,c=this.Aa,delete this.Aa,c&&c.Fb&&c.Fb(b,a),this.lb(o)):"sd"===b?this.wc?this.wc(a):"msg"in a&&"undefined"!=typeof console&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: ")):Pb("Unrecognized action received from server: "+y(b)+"\nAre you using the latest client?"))},r.nb=function(a){for(this.e("connection ready"),this.U=k,this.ib=(new Date).getTime(),Ub=a-(new Date).getTime(),a=0;a<this.Rb.length;a++)this.tb.xc(this.Rb[a]);for(this.Rb=[],Oc(this),a=0;a<this.S.length;a++)this.S[a]&&Sc(this,a);for(var b in this.da)for(var c in this.da[b])a=this.da[b][c],Mc(this,b,c,a.Ua,a.C);for(;this.mb.length;)b=this.mb.shift(),Qc(this,b.action,b.vc,b.data,b.C);this.Lb(k)},r.Tc=function(){this.U=o,this.e("data client disconnected");for(var a=v(function(){this.Ic()},this),b=0;b<this.S.length;b++){var c=this.S[b];c&&"h"in c.Xc&&(c.C&&c.C("disconnect"),delete this.S[b],this.ob--)}if(0===this.ob&&(this.S=[]),this.yb)this.ib&&(3e4<(new Date).getTime()-this.ib&&(this.Ub=1e3),this.ib=l),b=Math.max(0,this.Ub-((new Date).getTime()-this.Qc)),b*=Math.random(),this.e("Trying to reconnect in "+b+"ms"),setTimeout(a,b),this.Ub=Math.min(3e5,1.5*this.Ub);else{for(var d in this.vb)delete this.vb[d];this.Zc=function(){setTimeout(a,0)}}this.Lb(o)},r.Ic=function(){if(this.yb){this.e("Making a connection attempt"),this.Qc=(new Date).getTime(),this.ib=l;var a=v(this.Mb,this),b=v(this.nb,this),c=v(this.Tc,this),d=this.id+":"+Lc++,e=this;this.tb=new Dc(d,this.P,a,b,c,function(a){e.yb=o,f(Error(a))})}},r.Qa=function(){this.yb=o,this.tb?this.tb.close():this.Tc()},r.wb=function(){this.yb=k,this.Zc(),this.Zc=j},Tc.prototype.w=function(a){this.n!==l&&sc(this.n,function(b,c){a(b,c)})},Xc.prototype.toString=function(){return this.Ia.toString()},Yc.prototype.set=function(a,b){var c=this,d=[];return ib(b,function(a){var b=a.path,a=a.Da,e=Gb();M(L(c.qb,b),e),U(c.L,b,a),d.push({path:b,Cd:e})}),d},dd.prototype.Sb=function(a,b){b=this.Tb(a,b),b!=l&&gd(this,b)},ja(kd,dd),kd.prototype.Tb=function(a,b){return this.g=a,this.gb&&b!=l&&b.push(new V("value",this.g)),b},kd.prototype.bb=function(){return{}},ja(pd,rc),r=pd.prototype,r.setActive=function(a){this.oa=a},r.defaultView=function(){return qd(this)?this.get("default"):l},r.path=aa("O"),r.toString=function(){return jb(this.keys(),function(a){return"default"===a?"{}":a}).join("$")},r.Ua=function(){var a=[];return sc(this,function(b,c){a.push(c.M)}),a},ja(sd,dd),sd.prototype.Tb=function(a,b){if(b===l)return b;var c=[],d=this.M;t(d.ba)&&c.push(t(d.ma)&&d.ma!=l?function(a,b){var c=Sb(b,d.ba);return c>0||0===c&&a>=d.ma}:function(a,b){return 0<=Sb(b,d.ba)}),t(d.sa)&&c.push(t(d.Oa)?function(a,b){var c=Sb(b,d.sa);return 0>c||0===c&&a<=d.Oa}:function(a,b){return 0>=Sb(b,d.sa)});var e=l,f=l;if(t(this.M.ua))if(t(this.M.ba)){if(e=td(a,c,this.M.ua,o)){var g=a.R(e).k();c.push(function(a,b){var c=Sb(b,g);return 0>c||0===c&&e>=a})}}else if(f=td(a,c,this.M.ua,k)){var h=a.R(f).k();c.push(function(a,b){var c=Sb(b,h);return c>0||0===c&&a>=f})}for(var i=[],j=[],m=[],n=[],p=0;p<b.length;p++){var q=b[p].Y,r=b[p].ka;switch(b[p].type){case"child_added":ud(c,q,r)&&(this.g=this.g.H(q,r),j.push(b[p]));break;case"child_removed":this.g.R(q).f()||(this.g=this.g.H(q,l),i.push(b[p]));break;case"child_changed":!this.g.R(q).f()&&ud(c,q,r)&&(this.g=this.g.H(q,r),n.push(b[p]));break;case"child_moved":var s=!this.g.R(q).f(),u=ud(c,q,r);s?u?(this.g=this.g.H(q,r),m.push(b[p])):(i.push(new V("child_removed",this.g.R(q),q)),this.g=this.g.H(q,l)):u&&(this.g=this.g.H(q,r),j.push(b[p]))}}var v=e||f;if(v){var w=(p=f!==l)?this.g.Mc():this.g.Nc(),x=o,y=o,z=this;(p?a.mc:a.w).call(a,function(a,b){return!y&&w===l&&(y=k),y&&x?k:(x?(i.push(new V("child_removed",z.g.R(a),a)),z.g=z.g.H(a,l)):y&&(j.push(new V("child_added",b,a)),z.g=z.g.H(a,b)),w===a&&(y=k),void(a===v&&(x=k)))})}for(p=0;p<j.length;p++)c=j[p],q=this.g.V(c.Y,c.ka),i.push(new V("child_added",c.ka,c.Y,q));for(p=0;p<m.length;p++)c=m[p],q=this.g.V(c.Y,c.ka),i.push(new V("child_moved",c.ka,c.Y,q));for(p=0;p<n.length;p++)c=n[p],q=this.g.V(c.Y,c.ka),i.push(new V("child_changed",c.ka,c.Y,q));return this.gb&&0<i.length&&i.push(new V("value",this.g)),i},sd.prototype.nc=function(a){return this.g.R(a)!==P},sd.prototype.bb=function(a,b,c){var d={};this.g.J()||this.g.w(function(a){d[a]=k});var e=this.g,c=T(c,new I("")),f=new Na;M(L(f,this.M.path),k);var g=P.pa(a,b),h=[];return md(c,g,a,f,function(a,b,c){c!==l&&(h=h.concat(c))}),this.Tb(b,h),this.g.J()||this.g.w(function(a){d[a]=k}),this.g=e,d},vd.prototype.Eb=function(a,b,c,d,e){var f=a.path,g=L(this.qa,f),h=g.j();h===l?(h=new pd,M(g,h)):z(!h.f(),"We shouldn't be storing empty QueryMaps");var i=a.Ga();if(h.contains(i))ed(h.get(i),b,c,d,e);else{var j=this.i.Ia.G(f),a="default"===a.Ga()?new kd(a,j):new sd(a,j);if(rd(h)||wd(g))h.add(i,a),h.O||(h.O=a.M.path);else{var m,n;h.f()||(m=h.toString(),n=h.Ua()),h.add(i,a),h.O||(h.O=a.M.path),h.setActive(xd(this,h)),m&&n&&this.o.dd(h.path(),m,n)}rd(h)&&Pa(g,function(a){(a=a.j())&&(a.oa&&a.oa(),a.oa=l)}),ed(a,b,c,d,e),(b=(b=Qa(L(this.qa,f),function(a){var b;return(b=a.j())&&(b=a.j().defaultView())&&(b=a.j().defaultView().gb),b?k:void 0},k))||this.o===l)&&hd(a)}},vd.prototype.Wb=function(a,b,c,d){var e=L(this.qa,a.path).j();return e===l?l:zd(this,e,a,b,c,d)},vd.prototype.Sb=function(a,b,c){a=L(this.qa,a).j(),a!==l&&sc(a,function(a,d){d.Sb(b,c)})},vd.prototype.bb=function(a,b,c,d){var e={};return sc(b,function(b,f){var g=f.bb(a,c,d);dc(g,function(a,b){e[b]=a?k:ta(e,b)||o})}),c.J()||c.w(function(a){D(e,a)||(e[a]=o)}),e},r=Fd.prototype,r.toString=function(){return(this.P.Yb?"https://":"http://")+this.P.host},r.name=function(){return this.P.kb},r.Nb=function(a,b,c){var d=[];if(9<=a.length&&a.lastIndexOf(".priority")===a.length-9)a=new I(a.substring(0,a.length-9)),c=T(this.i.ya,a).Cb(b),d.push(a);else if(c){var e,a=new I(a),c=T(this.i.ya,a);for(e in b){var f=new I(e),c=c.pa(f,R(b[e]));d.push(f)}}else a=new I(a),c=R(b),d.push(a);for(b=Ed(this.Q,a,c,this.i.L,l),e=o,c=0;c<b.length;++c){var f=b[c],g=this.i,h=f.path;U(g.ya,h,f.Da),e=Zc(g,h)||e}e&&(a=Hd(this,a)),Bd(this.Q,a,d)},r.Lb=function(a){if(Gd(this,"connected",a),a===o){this.e("onDisconnectEvents");var b=this,c=[];Wc(this.N,new I(""),function(a,d){var e=Ed(b.Q,a,d,b.i.L,l);c.push.apply(c,b.i.set(a,e)),e=Id(b,a),Hd(b,e),Bd(b.Q,e,[a])}),ad(this.i,c),this.N=new Tc}},r.lb=function(a){Gd(this,"authenticated",a)},r.Za=function(a,b,c){this.o.Za(a,function(a,c){X(b,a,c)},function(a,b){if(Rb("auth() was canceled: "+b),c){var d=Error(b);d.code=a.toUpperCase(),c(d)}})},r.Bb=function(){this.o.Bb()},r.Wa=function(a,b,c,d){this.e("set",{path:a.toString(),value:b});var b=R(b,c),c=Ed(this.Q,a,b,this.i.L,l),e=this.i.set(a,c),f=this;this.o.put(a.toString(),b.T(k),function(b){var c="ok"===b;ad(f.i,e),c||(Rb("set at "+a+" failed: "+b),Zc(f.i,a),c=Hd(f,a),Bd(f.Q,c,[])),X(d,b)}),b=Id(this,a),Hd(this,b),Bd(this.Q,b,[a])},r.update=function(a,b,c){this.e("update",{path:a.toString(),value:b});var d,e=T(this.i.Ja,a),f=k,g=[];for(d in b){var f=o,h=R(b[d]),e=e.H(d,h);g.push(a.F(d))}if(f)Mb("update() called with empty data.  Don't do anything."),X(c,"ok");else{var e=Ed(this.Q,a,e,this.i.L,b),i=this.i.set(a,e),l=this;Rc(this.o,"m",a.toString(),b,function(b){z("ok"===b||"permission_denied"===b,"merge at "+a+" failed."),ad(l.i,i),X(c,b)},j),b=Id(this,a),Hd(this,b),Bd(l.Q,b,g)}},r.yc=function(a,b,c){this.e("setPriority",{path:a.toString(),wa:b});var d=T(this.i.L,a).Cb(b),d=Ed(this.Q,a,d,this.i.L,l),e=this.i.set(a,d),f=this;this.o.put(a.toString()+"/.priority",b,function(a){ad(f.i,e),X(c,a)}),a=Hd(this,a),Bd(f.Q,a,[])},r.rc=function(a,b){var c=this;this.o.rc(a.toString(),function(d){"ok"===d&&Vc(c.N,a),X(b,d)})},r.Eb=function(a,b,c,d,e){".info"===F(a.path)?this.oc.Eb(a,b,c,d,e):this.Q.Eb(a,b,c,d,e)},r.Wb=function(a,b,c,d){if(".info"===F(a.path))this.oc.Wb(a,b,c,d);else if(b=this.Q.Wb(a,b,c,d),b!==l){for(var c=this.i,a=a.path,d=[],e=0;e<b.length;++e)d[e]=T(c.ya,b[e]);for(U(c.ya,a,P),e=0;e<b.length;++e)U(c.ya,b[e],d[e])}},r.Qa=function(){this.o.Qa()},r.wb=function(){this.o.wb()},r.zc=function(a){if("undefined"!=typeof console){a?(this.ac||(this.ac=new hc(this.X)),a=this.ac.get()):a=this.X.get();var b,c=a,d=[],e=0;for(b in c)d[e++]=b;var f=function(a,b){return Math.max(b.length,a)};if(d.reduce)b=d.reduce(f,0);else{var g=0;ib(d,function(a){g=f.call(j,g,a)}),b=g}for(var h in a){for(c=a[h],d=h.length;b+2>d;d++)h+=" ";console.log(h+c)}}},r.Ac=function(a){gc(this.X,a),this.bd.Bc[a]=k},r.e=function(){Mb("r:"+this.o.id+":",arguments)},Y.pd=function(){return Y.Pc?Y.Pc:Y.Pc=new Y},Y.prototype.Qa=function(){for(var a in this.Va)this.Va[a].Qa()},Y.prototype.interrupt=Y.prototype.Qa,Y.prototype.wb=function(){for(var a in this.Va)this.Va[a].wb()},Y.prototype.resume=Y.prototype.wb;var Z={qd:function(a){var b=Q.prototype.hash;Q.prototype.hash=a;var c=Yb.prototype.hash;return Yb.prototype.hash=a,function(){Q.prototype.hash=b,Yb.prototype.hash=c}}};Z.hijackHash=Z.qd,Z.Ga=function(a){return a.Ga()},Z.queryIdentifier=Z.Ga,Z.sd=function(a){return a.u.o.da},Z.listens=Z.sd,Z.yd=function(a){return a.u.o.tb},Z.refConnection=Z.yd,Z.fd=Jc,Z.DataConnection=Z.fd,Jc.prototype.sendRequest=Jc.prototype.xa,Jc.prototype.interrupt=Jc.prototype.Qa,Z.gd=Dc,Z.RealTimeConnection=Z.gd,Dc.prototype.sendRequest=Dc.prototype.xc,Dc.prototype.close=Dc.prototype.close,Z.ed=pb,Z.ConnectionTarget=Z.ed,Z.nd=function(){wc=oc=k},Z.forceLongPolling=Z.nd,Z.od=function(){xc=k},Z.forceWebSockets=Z.od,Z.Ed=function(a,b){a.u.o.wc=b},Z.setSecurityDebugCallback=Z.Ed,Z.zc=function(a,b){a.u.zc(b)},Z.stats=Z.zc,Z.Ac=function(a,b){a.u.Ac(b)},Z.statsIncrementCounter=Z.Ac,$.prototype.cancel=function(a){A("Firebase.onDisconnect().cancel",0,1,arguments.length),C("Firebase.onDisconnect().cancel",1,a,k),this.ub.rc(this.O,a)},$.prototype.cancel=$.prototype.cancel,$.prototype.remove=function(a){A("Firebase.onDisconnect().remove",0,1,arguments.length),E("Firebase.onDisconnect().remove",this.O),C("Firebase.onDisconnect().remove",1,a,k),Jd(this.ub,this.O,l,a)
},$.prototype.remove=$.prototype.remove,$.prototype.set=function(a,b){A("Firebase.onDisconnect().set",1,2,arguments.length),E("Firebase.onDisconnect().set",this.O),ya("Firebase.onDisconnect().set",a,o),C("Firebase.onDisconnect().set",2,b,k),Jd(this.ub,this.O,a,b)},$.prototype.set=$.prototype.set,$.prototype.Wa=function(a,b,c){A("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),E("Firebase.onDisconnect().setWithPriority",this.O),ya("Firebase.onDisconnect().setWithPriority",a,o),Da("Firebase.onDisconnect().setWithPriority",2,b,o),C("Firebase.onDisconnect().setWithPriority",3,c,k),(".length"===this.va||".keys"===this.va)&&f("Firebase.onDisconnect().setWithPriority failed: "+this.va+" is a read-only object.");var d=this.ub,e=this.O,g=R(a,b);Pc(d.o,e.toString(),g.T(k),function(a){"ok"===a&&Uc(d.N,e,g),X(c,a)})},$.prototype.setWithPriority=$.prototype.Wa,$.prototype.update=function(a,b){A("Firebase.onDisconnect().update",1,2,arguments.length),E("Firebase.onDisconnect().update",this.O),Ca("Firebase.onDisconnect().update",a),C("Firebase.onDisconnect().update",2,b,k);var c,d=this.ub,e=this.O,f=k;for(c in a)f=o;if(f)Mb("onDisconnect().update() called with empty data.  Don't do anything."),X(b,k);else{f=d.o,c=e.toString();var g=function(c){if("ok"===c)for(var f in a){var g=R(a[f]);Uc(d.N,e.F(f),g)}X(b,c)};f.U?Qc(f,"om",c,a,g):f.mb.push({vc:c,action:"om",data:a,C:g})}},$.prototype.update=$.prototype.update;var Sd,Td=0,Ud=[];Sd=function(){var a=(new Date).getTime()+Ub,b=a===Td;Td=a;for(var c=Array(8),d=7;d>=0;d--)c[d]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(a%64),a=Math.floor(a/64);if(z(0===a),a=c.join(""),b){for(d=11;d>=0&&63===Ud[d];d--)Ud[d]=0;Ud[d]++}else for(d=0;12>d;d++)Ud[d]=Math.floor(64*Math.random());for(d=0;12>d;d++)a+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(Ud[d]);return z(20===a.length,"NextPushId: Length should be 20."),a},ja(W,G);var Vd=W,Wd=["Firebase"],Xd=ba;!(Wd[0]in Xd)&&Xd.execScript&&Xd.execScript("var "+Wd[0]);for(var Yd;Wd.length&&(Yd=Wd.shift());)!Wd.length&&t(Vd)?Xd[Yd]=Vd:Xd=Xd[Yd]?Xd[Yd]:Xd[Yd]={};W.prototype.name=function(){return A("Firebase.name",0,0,arguments.length),this.path.f()?l:Ka(this.path)},W.prototype.name=W.prototype.name,W.prototype.F=function(a){if(A("Firebase.child",1,1,arguments.length),fa(a))a=String(a);else if(!(a instanceof I))if(F(this.path)===l){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/")),Ga("Firebase.child",b)}else Ga("Firebase.child",a);return new W(this.u,this.path.F(a))},W.prototype.child=W.prototype.F,W.prototype.parent=function(){A("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return a===l?l:new W(this.u,a)},W.prototype.parent=W.prototype.parent,W.prototype.root=function(){A("Firebase.ref",0,0,arguments.length);for(var a=this;a.parent()!==l;)a=a.parent();return a},W.prototype.root=W.prototype.root,W.prototype.toString=function(){A("Firebase.toString",0,0,arguments.length);var a;if(this.parent()===l)a=this.u.toString();else{a=this.parent().toString()+"/";var b=this.name();a+=encodeURIComponent(String(b))}return a},W.prototype.toString=W.prototype.toString,W.prototype.set=function(a,b){return A("Firebase.set",1,2,arguments.length),E("Firebase.set",this.path),ya("Firebase.set",a,o),C("Firebase.set",2,b,k),this.u.Wa(this.path,a,l,b)},W.prototype.set=W.prototype.set,W.prototype.update=function(a,b){return A("Firebase.update",1,2,arguments.length),E("Firebase.update",this.path),Ca("Firebase.update",a),C("Firebase.update",2,b,k),this.u.update(this.path,a,b)},W.prototype.update=W.prototype.update,W.prototype.Wa=function(a,b,c){return A("Firebase.setWithPriority",2,3,arguments.length),E("Firebase.setWithPriority",this.path),ya("Firebase.setWithPriority",a,o),Da("Firebase.setWithPriority",2,b,o),C("Firebase.setWithPriority",3,c,k),(".length"===this.name()||".keys"===this.name())&&f("Firebase.setWithPriority failed: "+this.name()+" is a read-only object."),this.u.Wa(this.path,a,b,c)},W.prototype.setWithPriority=W.prototype.Wa,W.prototype.remove=function(a){A("Firebase.remove",0,1,arguments.length),E("Firebase.remove",this.path),C("Firebase.remove",1,a,k),this.set(l,a)},W.prototype.remove=W.prototype.remove,W.prototype.transaction=function(a,b,c){function d(){}A("Firebase.transaction",1,3,arguments.length),E("Firebase.transaction",this.path),C("Firebase.transaction",1,a,o),C("Firebase.transaction",2,b,k),t(c)&&"boolean"!=typeof c&&f(Error(B("Firebase.transaction",3,k)+"must be a boolean.")),(".length"===this.name()||".keys"===this.name())&&f("Firebase.transaction failed: "+this.name()+" is a read-only object."),"undefined"==typeof c&&(c=k);var e=this.u,g=this.path,h=c;e.e("transaction on "+g);var i=new W(e,g);i.pc("value",d);var h={path:g,update:a,C:b,status:l,Uc:Gb(),gc:h,$c:0,dc:function(){i.Kb("value",d)},ec:l},j=h.update(T(e.Ya,g).T());if(t(j)){za("transaction failed: Data returned ",j),h.status=1;var m=L(e.Xa,g),n=m.j()||[];n.push(h),M(m,n),m=T(e.i.L,g).k(),U(e.Ya,g,R(j,m)),h.gc&&(U(e.i.Ja,g,R(j,m)),Bd(e.Q,g,[g])),Ld(e)}else h.dc(),h.C&&(e=Od(e,g),h.C(l,o,e))},W.prototype.transaction=W.prototype.transaction,W.prototype.yc=function(a,b){A("Firebase.setPriority",1,2,arguments.length),E("Firebase.setPriority",this.path),Da("Firebase.setPriority",1,a,o),C("Firebase.setPriority",2,b,k),this.u.yc(this.path,a,b)},W.prototype.setPriority=W.prototype.yc,W.prototype.push=function(a,b){A("Firebase.push",0,2,arguments.length),E("Firebase.push",this.path),ya("Firebase.push",a,k),C("Firebase.push",2,b,k);var c=Sd(),c=this.F(c);return"undefined"!=typeof a&&a!==l&&c.set(a,b),c},W.prototype.push=W.prototype.push,W.prototype.fa=function(){return new $(this.u,this.path,this.name())},W.prototype.onDisconnect=W.prototype.fa,W.prototype.zd=function(){Rb("FirebaseRef.removeOnDisconnect() being deprecated. Please use FirebaseRef.onDisconnect().remove() instead."),this.fa().remove(),Kd(this.u)},W.prototype.removeOnDisconnect=W.prototype.zd,W.prototype.Dd=function(a){Rb("FirebaseRef.setOnDisconnect(value) being deprecated. Please use FirebaseRef.onDisconnect().set(value) instead."),this.fa().set(a),Kd(this.u)},W.prototype.setOnDisconnect=W.prototype.Dd,W.prototype.Za=function(a,b,c){A("Firebase.auth",1,3,arguments.length),u(a)||f(Error(B("Firebase.auth",1,o)+"must be a valid credential (a string).")),C("Firebase.auth",2,b,k),C("Firebase.auth",3,b,k),this.u.Za(a,b,c)},W.prototype.auth=W.prototype.Za,W.prototype.Bb=function(){this.u.Bb()},W.prototype.unauth=W.prototype.Bb,W.enableLogging=Nb,W.INTERNAL=Z,W.Context=Y}();var _gaq=[["_setAccount","<%= pkg.analytics %>"],["_trackPageview"]],enigma=new Enigma(document.getElementById("enigma"));enigma.queue="enigma je mrtva".toUpperCase().split(""),enigma.nextLetterAppend=1e3,enigma.start(),function(){var a=!1,b="signedin",c=document.getElementById("sourceheader"),d=document.getElementById("sourceuser"),e=function(e){a=!0,c&&c.classList.add(b),d&&(d.innerHTML=e)},f=function(){c&&c.classList.remove(b),d&&(d.innerHTML="")};window.addEventListener("message",function(b){if("https://madebysource.com"===b.origin||b.origin===location.origin){var c=b.data.split(";");if("signedout"===c[0])window.sessionStorage.removeItem("sourceUser"),a&&f();else if("signedin"===c[0]&&2===c.length){var d=c[1];window.sessionStorage.setItem("sourceUser",d),a||e(d)}}});var g=window.sessionStorage&&window.sessionStorage.sourceUser;g&&e(g);var h=document.createElement("script");h.src="https://madebysource.com/api/user-bridge/enigma/",h.defer="defer",document.getElementsByTagName("head")[0].appendChild(h)}();